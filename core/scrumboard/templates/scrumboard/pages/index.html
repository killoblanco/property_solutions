{% extends "scrumboard/base.html" %}
{% load static core_template_filters %}

{% block page %}
    <div class="container" style="margin-bottom: 1rem;">
        <div class="row">
            <div class="col-sm-5">
                {# Date time information #}
                <div class="row">
                    <div class="col-sm-12">
                        <div class="mdl-card mdl-shadow--4dp" style="width: 100%;">
                            <div class="mdl-card__title mdl-card--expand">
                                <h4>
                                    {% now "l" %}<br>
                                    <small>{% now "E d, Y" %}</small>
                                </h4>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Week: {% now "W" %}
                            </div>
                            <div class="mdl-card__actions mdl-card--border text-right">
                                <a class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                                   href="{% url "core:scrumboard:create" %}">
                                    New requirement
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {# /Date time information #}
                <div class="clearfix"><br></div>
                {# Requirements Deadline Graph #}
                <div class="row">
                    <div class="col-sm-12">
                        <div class="mdl-card" style="width: 100%;">
                            <div class="mdl-card__menu">
                                <a class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                                   href="{% url "core:scrumboard:read" %}">
                                    <i class="material-icons">more</i>
                                </a>
                            </div>
                            <div class="mdl-card__title mdl-card--expand">
                                <h4>Deadlines</h4>
                            </div>
                            <div class="mdl-card__supporting-text" style="width: 100% !important;">
                                <ul class="list-unstyled">
                                    {% for year, year_data in deadline.items %}
                                        {% for month, month_data in year_data.items %}
                                            <li>
                                                <ul class="list-inline">
                                                    <li class="h5">
                                                        {{ month|month_name }} <small>{{ year }}</small> |
                                                    </li>
                                                    {% for day, freq in month_data.items %}
                                                        <li>
                                                            <span class="mdl-badge" data-badge="{{ freq }}">{{ day }}</span>
                                                        </li>
                                                    {% endfor %}
                                                </ul>
                                            </li>
                                        {% endfor %}
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                {# Requirements Deadline Graph #}
            </div>
            <div class="col-sm-7">
                {# Requirements Type Graph #}
                <div class="row">
                    <div class="col-sm-12">
                        <div class="mdl-card mdl-shadow--2dp" style="width: 100%; height: 30vh !important;">
                            <div class="mdl-card__menu">
                                <a class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                                   href="{% url "core:scrumboard:read" %}">
                                    <i class="material-icons">more</i>
                                </a>
                            </div>
                            <div class="mdl-card__title mdl-card--expand">
                                <canvas id="typeChart" height="100%"></canvas>
                            </div>
                            <div class="mdl-card__supporting-text">
                                Requirements Type
                            </div>
                        </div>
                    </div>
                </div>
                {# /Requirements Type Graph #}
                <div class="clearfix"><br></div>
                {# Requirements Priority Graph #}
                <div class="row">
                    <div class="col-sm-12">
                        <div class="mdl-card mdl-shadow--2dp" style="width: 100%; height: 30vh !important;">
                            <div class="mdl-card__menu">
                                <a class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect"
                                   href="{% url "core:scrumboard:read" %}">
                                    <i class="material-icons">more</i>
                                </a>
                            </div>
                            <div class="mdl-card__title mdl-card--expand">
                                <canvas id="priorityChart" height="100%"></canvas>
                            </div>
                            <div class="mdl-card__supporting-text">
                                <p>Requirements Priority</p>
                            </div>
                        </div>
                    </div>
                </div>
                {# /Requirements Priority Graph #}
            </div>
        </div>
        <div class="clearfix"><br></div>
        <div class="row">
            <div class="col-sm-12">
                <table class="mdl-shadow--2dp mdl-data-table mdl-js-data-table" style="width: 100%;">
                    <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric">Lasted Requests:</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="mdl-data-table__cell--non-numeric">Home Carrousel</td>
                    </tr>
                    <tr>
                        <td class="mdl-data-table__cell--non-numeric">Contact information like address, phone and
                            email
                        </td>
                    </tr>
                    <tr>
                        <td class="mdl-data-table__cell--non-numeric">Replace Dummie text</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    {{ block.parent }}
    <script>
        window.page = {
            'urls': {
                'typeChart': "{% url "core:scrumboard:api:type_chart_data" %}",
                'priorityChart': "{% url "core:scrumboard:api:priority_chart_data" %}",
            },
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="{% static "scrum-graphics.min.js" %}"></script>
{% endblock %}